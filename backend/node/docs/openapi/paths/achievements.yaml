paths:
  /api/achievements:
    get:
      operationId: listAchievements
      tags:
        - Achievements
      summary: Listar todas las definiciones de logros
      description: Obtiene la lista de todas las definiciones de achievements
      security:
        - BearerAuth: []
      parameters:
        - name: category
          in: query
          required: false
          schema:
            type: string
            enum:
              - ONBOARDING
              - STREAK
              - FREQUENCY
              - ATTENDANCE
              - ROUTINE
              - CHALLENGE
              - PROGRESS
              - TOKEN
              - SOCIAL
          description: Filtrar por categoría
        - name: is_active
          in: query
          required: false
          schema:
            type: boolean
          description: Filtrar solo achievements activos
      responses:
        '200':
          description: Lista de definiciones de logros
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../components/common.yaml#/components/schemas/AchievementDefinitionResponse
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: ../components/common.yaml#/components/schemas/Error
    post:
      operationId: createAchievement
      tags:
        - Achievements
      summary: Crear una nueva definición de logro
      description: Crea una nueva definición de achievement (admin)
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: ../components/common.yaml#/components/schemas/CreateAchievementDefinitionRequest
      responses:
        '201':
          description: Achievement creado exitosamente
          content:
            application/json:
              schema:
                $ref: ../components/common.yaml#/components/schemas/AchievementDefinitionResponse
        '400':
          $ref: ../components/responses.yaml#/components/responses/BadRequest
        '401':
          description: No autorizado
          content:
            application/json:
              schema:
                $ref: ../components/common.yaml#/components/schemas/Error
  /api/achievements/{id}:
    get:
      operationId: getAchievementById
      tags:
        - Achievements
      summary: Obtener un logro por ID
      description: Obtiene los detalles de una definición de achievement
      security:
        - BearerAuth: []
      parameters:
        - $ref: ../components/parameters.yaml#/components/parameters/IdPathParam
          description: ID del achievement
      responses:
        '200':
          description: Detalles del achievement
          content:
            application/json:
              schema:
                $ref: ../components/common.yaml#/components/schemas/AchievementDefinitionResponse
        '404':
          $ref: ../components/responses.yaml#/components/responses/NotFound
    put:
      operationId: updateAchievement
      tags:
        - Achievements
      summary: Actualizar una definición de logro
      description: Actualiza los datos de un achievement (admin)
      security:
        - BearerAuth: []
      parameters:
        - $ref: ../components/parameters.yaml#/components/parameters/IdPathParam
          description: ID del achievement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: ../components/common.yaml#/components/schemas/UpdateAchievementDefinitionRequest
      responses:
        '200':
          description: Achievement actualizado
          content:
            application/json:
              schema:
                $ref: ../components/common.yaml#/components/schemas/AchievementDefinitionResponse
        '400':
          $ref: ../components/responses.yaml#/components/responses/BadRequest
        '404':
          $ref: ../components/responses.yaml#/components/responses/NotFound
    delete:
      operationId: deleteAchievement
      tags:
        - Achievements
      summary: Eliminar un logro
      description: Elimina lógicamente un achievement (soft delete)
      security:
        - BearerAuth: []
      parameters:
        - $ref: ../components/parameters.yaml#/components/parameters/IdPathParam
          description: ID del achievement
      responses:
        '204':
          description: Achievement eliminado exitosamente
        '404':
          $ref: ../components/responses.yaml#/components/responses/NotFound
